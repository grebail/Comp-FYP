// Display Grouped Books in Table
function displayBooks(groupedBooks) {
    const tbody = $('#booksTable tbody');
    tbody.empty(); // Clear existing table rows

    Object.keys(groupedBooks).forEach(isbn => {
        const group = groupedBooks[isbn];
        let rowIndex = 1;

        // Group Header Row
        tbody.append(`
            <tr class="group-row">
                <td></td>
                <td>${isbn}</td>
                <td>${group.title}</td>
                <td>${group.author}</td>
                <td>${group.publishedDate}</td>
                <td>${group.totalCopies}</td>
                <td colspan="5">
                    <button class="details-button" data-isbn="${isbn}">Details</button>
                </td>
            </tr>
        `);

        // Individual Book Copies
        group.copies.forEach(copy => {
            tbody.append(`
                <tr>
                    <td>${rowIndex++}</td>
                    <td></td> <!-- Empty for group alignment -->
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>${copy.copyId}</td>
                    <td><input type="text" class="location-input" value="${copy.bookLocation}"></td>
                    <td><input type="text" class="location-id-input" value="${copy.locationId}"></td>
                    <td><input type="checkbox" class="availability-input" ${copy.availability ? 'checked' : ''}></td>
                    <td>
                        <button class="save-button" data-copyid="${copy.copyId}">Save</button>
                        <button class="delete-button" data-copyid="${copy.copyId}">Delete</button>
                    </td>
                </tr>
            `);
        });
    });
}